<canvas></canvas>
<script>
  c = document.getElementsByTagName("canvas")[0];
  ctx = c.getContext("2d");

  s = 10; z = s - 1;
  n = 15;
  x = 1, y = 10;
  dx = 1, dy = 0;
  ax = 4, ay = 10;
  ts = [];

  c.width = c.height = (n + 1) * s;

  setInterval(() => {
      ts.unshift({x, y});

      x += dx;
      y += dy;

      if (x < 0) x = n;
      if (x > n) x = 0;
      if (y < 0) y = n;
      if (y > n) y = 0;
      
      for (t of ts) {
	  if (x == t.x && y == t.y) {
	      ts = [];
	  }
      }

      t = ts.pop();
      if (x == ax && y == ay) {
	  ts.push(t);
	  ax = Math.round(Math.random() * n);
	  ay = Math.round(Math.random() * n);
      }

      ctx.fillStyle = "yellow";
      ctx.fillRect(0, 0, c.width, c.height);

      ctx.fillStyle = "green";
      ctx.fillRect(x * s, y * s, z, z);

      ctx.fillStyle = "orange";
      for (t of ts) ctx.fillRect(t.x * s, t.y * s, z, z);

      ctx.fillStyle = "red";
      ctx.fillRect(ax * s, ay * s, z, z);
  }, 100);

  document.addEventListener("keydown", (key) => {
      if (key.key == "w") dx =  0, dy = -1;
      if (key.key == "s") dx =  0, dy =  1;
      if (key.key == "a") dx = -1, dy =  0;
      if (key.key == "d") dx =  1, dy =  0;
  });
</script>

