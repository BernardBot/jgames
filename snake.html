<canvas></canvas>
<script>
  c = document.getElementsByTagName("canvas")[0];
  ctx = c.getContext("2d");

  s = 10; z = s - 1;
  n = 15;
  x = 10, y = 100;
  dx = s, dy = 0;
  ax = 40, ay = 100;
  ts = [];

  c.width = c.height = l = s * n;

  setInterval(() => {
      ts.unshift({x, y});

      x = (x + dx + l) % l;
      y = (y + dy + l) % l;

      for (t of ts) if (x == t.x && y == t.y) ts = [];

      t = ts.pop();

      if (x == ax && y == ay) {
	  ts.push(t);
	  ax = s * Math.floor(Math.random() * n);
	  ay = s * Math.floor(Math.random() * n);
      }

      ctx.fillStyle = "yellow";
      ctx.fillRect(0, 0, l, l);

      ctx.fillStyle = "green";
      ctx.fillRect(x, y, z, z);

      ctx.fillStyle = "orange";
      for (t of ts) ctx.fillRect(t.x, t.y, z, z);

      ctx.fillStyle = "red";
      ctx.fillRect(ax, ay, z, z);
  }, 100);

  document.addEventListener("keydown", (key) => {
      if (key.key == "w") dx =  0, dy = -s;
      if (key.key == "s") dx =  0, dy =  s;
      if (key.key == "a") dx = -s, dy =  0;
      if (key.key == "d") dx =  s, dy =  0;
  });
</script>

